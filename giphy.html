<!DOCTYPE html>
<html>

<head>
    <title> GIPHY API </title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="jumbotron"> Movies Gifs Galore
            </div>
        </div>
    </div>
    <div class="container">

            <div class="col-md-9" id="buttons"></div>
            <div class="col-md-3">
			      <form id="gif-form">
				      <input type="text" class="form-control" id="searchBar" placeholder="Search for a movie here">
				  <br>
				      <input id="searchButton" type="submit" value="Search">
    			</form>
            
            </div>
        </div>
        <div class="container" id="images">
            <div class="row">
                <div class="col-md12" id="gifsAppearHere"> 
                </div>
            
        </div>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
        <script type="text/javascript">

        //steps
        // 1. buttons from array already displayed with app attributes. 
        // 2. search bar creates new button with attributes.
        // 3. Ajax request when button is pushed, display the gis.

//styling
        var styleJumbotron = {
            backgroundColor: "#142c82",
            fontSize: "48px",
            color: "white",
            textAlign: "center",
            height: "120px"
        }
            $('.jumbotron').css(styleJumbotron)


//STEP 1: Make buttons populate from array. Create it with a class and value to eventually link to it.
//global vars
        var gifArray = ["deadpool", "the big lebowski", "ferris bueller", "the nightmare before christmas", "the matrix", "the princess bride", "the fifth element", "fight club", "wreck it ralph", "pulp fiction", "groundhog day", "blazing saddles"]

		var selectButtonDiv = $("#buttons");
        var newButton;
       // var movieLink = $("<button>").attr("movie")
        //console.log (movieLink)

        
        function createButtons (){
        	   	selectButtonDiv.empty();
        	for (var i = 0; i < gifArray.length; i++) {
        		newButton = $("<button>" + gifArray[i] + "</button>")
        		selectButtonDiv.append(newButton);
        		newButton.addClass("movieTitles")
        		newButton.attr("value", gifArray[i])
        		}	
        }

       	createButtons()



       	// STEP 2: CREATE NEW BUTTONS FROM SEARCH
        var searchInput // placeholder.
        var selectGifDIV = $("#images")

        $('#searchButton').on("click", function search(){
        	event.preventDefault();
        	searchInput = $('#searchBar').val().trim();
        	gifArray.push(searchInput);
        	console.log(gifArray);
        	createButtons()
        })
        


//to connect to the api and append/push the gifs into the gif div on button click      

    var urlString 
	var gifPlaceHolder
	var gifsAjax
	var gifName
	
        			$('.movieTitles').on("click", function(){
        				        	   	$('#gifsAppearHere').empty();

						gifName = $(this).attr("value");
           			 	console.log(gifName)
             			 alert(gifName);
     					 urlString = "http://api.giphy.com/v1/gifs/search?q=" + gifName + "&api_key=dc6zaTOxFJmzC&limit=10"
        				$.ajax({
					        url: urlString,
					        method: "GET",
					        }).done(function(gifs){
					        	for (var i = 0; i < 10; i++){
					        	gifsAjax = gifs.data
				        		gifPlaceHolder = gifs;
						        var active = gifsAjax[i].url
								var still = gifsAjax[i].images.fixed_height_still.url
								var rating = gifsAjax[i].rating

								var actualGif = $("<img>");
								actualGif.attr("src", gifsAjax[i].images.fixed_height_still.url)
								actualGif.attr("state", "still")

								$('#gifsAppearHere').append(actualGif)
								$("#gifsAppearHere").append('<<p> Rating is:' + rating + '</p>')
							}
           					})
        		   })

        	

		// var stillState = $(this).attr("state")
		// if (stateStill === "still"){
		// 	$("img").attr("src", active)
		// 	$("img").attr("state", "active")
		// }

		// var activeState = $(this).attr("state")
		// if (activeState === "active"){
		// 	$("img").attr("src", still)
		// 	$("img").attr("state", "still")
		// }


// to gather the gif buttons in the button div:

				// $("#search").on("click", function() {
    // 		  	var person = $(this).attr("data-person");
    //             //to stop the search bar from reloading the page
    //             event.preventDefault();

    //             searchInput = $("#searchInput").val().trim();
    //             for(var i = 0; i < gifArray.length; i++){
    //             //clear the button here, and reappend images.
    //             }
    //             $('#buttons').append($("<button>"+ gifArray[0] +">" + gifArray[0] + "</button>"))
    //         })







//misc notes



// To get the gif urls:
// var gifsAjax = gifs.data
	
// 	active: gifsAjax[i].embed_url
// 	still: gifsAjax.images.fixed_height_still
// 	rating: gifsAjax[i].rating




                //$(".movies") = use this button click to display the gifs.
               
                //on searchButton click, clear the appended images, and reappend them.
               //this way is better. It pushes all the things in the array as a button. Have to clear the buttons each time a new thing in the array is made so it doesnt constantly append the new, same things over and over
//              $('#buttons').append($("<button class="+ gifArray[i] +">" + gifArray[i] + "</button>"))
                
               


                //create images in the image container

                //clear it on any button click



                // $("#search").on("click", function(event) {
                //         event.preventDefault(); -> to stop the search bar from reloading the page
                //         // This line of code will grab the input from the textbox
                //         var movie = $("#movie-input").val().trim();

        </script>
</body>

</html>
